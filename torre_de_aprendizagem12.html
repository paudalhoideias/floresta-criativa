<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Torre da Descoberta | Pau D‚ÄôAlho</title>
  <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Caudex&display=swap" rel="stylesheet" />
  <style>
    body { margin: 0; font-family: 'Caudex', serif; background-color: #fff; }

    /* TOPO */
    #top-bar { position: fixed; top: 0; width: 100%; background: white; z-index: 9999;
      transition: top 0.4s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .logo-menu-container { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; }
    #logo-topo { height: 40px; }
    #hamburguer { font-size: 30px; cursor: pointer; }
    #menu-dropdown { display: none; background: white; border-top: 1px solid #ddd; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
    #menu-dropdown ul { list-style: none; margin: 0; padding: 10px 20px; }
    #menu-dropdown ul li { position: relative; padding: 8px 0; }
    #menu-dropdown ul li > ul { display: none; padding-left: 15px; }
    #menu-dropdown ul li:hover > ul { display: block; }
    #menu-dropdown a { text-decoration: none; color: #333; font-family: 'Caudex', serif; }
    @media screen and (max-width: 768px) { #menu-dropdown a { font-family: 'Caveat', cursive; font-size: 20px; } }

    /* INTRO */
    .boas-vindas-torre { background: #fffdf5; padding: 60px 20px 20px; text-align: center; border-bottom: 1px solid #eee; }
    .boas-vindas-torre h1 { font-size: 28px; color: #4d3e2a; margin-bottom: 15px; }
    .boas-vindas-torre p { font-size: 16px; line-height: 1.6; color: #333; }
    @media screen and (max-width: 768px) {
      .boas-vindas-torre { font-family: 'Caveat', cursive; padding: 50px 15px 15px; }
      .boas-vindas-torre h1 { font-size: 24px; }
      .boas-vindas-torre p { font-size: 18px; }
    }

    .imagem-torre { width: 100%; display: block; position: relative; margin-top: 70px; }
    .hotspot { position: absolute; cursor: pointer; z-index: 2; border-radius: 10px; transition: box-shadow 0.3s ease, border 0.3s ease; }
    .hotspot:hover { box-shadow: 0 0 0 1px rgba(255,193,7,0.4); border: 0px dashed rgba(255,193,7,0.5); }
    #hotspot-3em1 { top: 45%; left: 5%; width: 20%; height: 40%; }
    #hotspot-fixa { top: 35%; left: 40%; width: 15%; height: 40%; }
    #hotspot-capivara { top: 23%; left: 68%; width: 10%; height: 15%; }

    /* BLOCO TORRES */
    .torre-bloco {
      font-family: "Caudex", serif;
      padding: 20px; border: 2px solid #ccc; border-radius: 12px;
      margin: 40px auto; max-width: 960px; background-color: #fdfdfd;
    }
    .titulo-produto { font-size: 2rem; margin-bottom: 20px; }
    .torre-container { display: flex; flex-wrap: wrap; gap: 30px; }
    .foto-produto img { width: 100%; max-width: 400px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .acabamento-opcoes { flex: 1; min-width: 250px; }
    .cores-opcoes label { display: inline-block; width: 100px; margin: 5px 0; }

    .carrossel { margin-top: 40px; }
    .carrossel-imagens { display: flex; gap: 10px; overflow-x: auto; }
    .carrossel-imagens img { width: 100px; height: 100px; border-radius: 8px; cursor: pointer; object-fit: cover; }

    .botoes-torre { margin-top: 30px; display: flex; gap: 20px; }
    .botoes-torre button { padding: 10px 20px; font-size: 1.1rem; border: none; border-radius: 8px; cursor: pointer; }
    .btn-saiba-mais { background-color: #ddd; }
    .btn-comprar { background-color: #e8a229; color: white; }
    .carrossel-imagens .thumb.ativo { outline: 2px solid #e8a229; outline-offset: 2px; }


    /* CURIOSIDADE */
    #curiosidade { display: none; text-align: center; padding: 20px; margin: 20px auto;
      max-width: 600px; background: #fff9e5; border-left: 6px solid #ffc107;
      font-style: italic; font-size: 16px; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); }

    /* MODAL */
    #modal-saiba-mais[hidden] { display:none; }
    #modal-saiba-mais { position:fixed; inset:0; z-index:1000; }
    #modal-saiba-mais .modal-backdrop { position:absolute; inset:0; background:rgba(0,0,0,.45); }
    #modal-saiba-mais .modal-dialog { position:relative; max-width:800px; margin:8vh auto; background:#fff; border-radius:16px; overflow:hidden; }
    #modal-saiba-mais header { display:flex; justify-content:space-between; align-items:center; padding:12px 16px; background:#fff7e9; }
    #modal-saiba-mais .modal-content { padding:16px; max-height:65vh; overflow:auto; }

    /* RODAP√â */
    #rodape { background: #f9f9f9; color: #555; text-align: center; padding: 30px 10px 20px; font-size: 14px; border-top: 1px solid #ddd; margin-top: 50px; }
    .links-rodape a { margin: 0 10px; color: #555; text-decoration: none; }
    .links-rodape a:hover { text-decoration: underline; }
  </style>
</head>

<body>
  <section class="boas-vindas-torre">
    <div class="container-boas-vindas">
      <h1>Bem-vindo(a) √† Torre da Descoberta!</h1>
      <p>
        Um lugar onde os pequenos sobem alto na imagina√ß√£o!<br>
        Aqui voc√™ vai conhecer nossas <strong>Torres de Aprendizagem</strong>.<br>
        <em>Clique em uma das torres para descobrir todos os detalhes‚Ä¶</em>
      </p>
    </div>
  </section>

  <!-- TOPO -->
  <div id="top-bar">
    <div class="logo-menu-container">
      <a href="index.html"><img src="images/logo.png" alt="Logo Pau D'Alho" id="logo-topo" /></a>
      <div id="hamburguer" onclick="toggleMenu()">‚ò∞</div>
    </div>
    <nav id="menu-dropdown">
      <ul>
        <li>Produtos
          <ul>
            <li><a href="torre_de_aprendizagem.html">Torres de Aprendizagem</a></li>
            <li><a href="clareira.html">Cadeiras</a></li>
          </ul>
        </li>
        <li><a href="laboratorio.html">Novidades</a></li>
        <li><a href="pau_dalho.html">Sobre n√≥s</a></li>
        <li><a href="contato.html">Fale Conosco</a></li>
      </ul>
    </nav>
  </div>

  <!-- IMAGEM CEN√ÅRIO -->
  <div style="position: relative;">
    <img src="images/back_torre.webp" alt="Torres de Aprendizagem" class="imagem-torre" />
    <div id="hotspot-3em1" class="hotspot" onclick="mostrar('3em1')"></div>
    <div id="hotspot-fixa" class="hotspot" onclick="mostrar('fixa')"></div>
    <div id="hotspot-capivara" class="hotspot" onclick="mostrar('curiosidade')"></div>
  </div>

  <!-- CURIOSIDADE -->
  <div id="curiosidade">üåø Sabia que usamos compensado multilaminado de alta resist√™ncia, com acabamento at√≥xico e dur√°vel?</div>

  <!-- TORRE 3 EM 1 -->
  <section id="torre-3em1" class="torre-bloco" hidden>
    <h2 class="titulo-produto">Torre de Aprendizagem 3 em 1</h2>
    <div class="torre-container">
      <div class="foto-produto"><img src="images/torre/3em1_Ram_n01.webp" alt="Foto da Torre 3 em 1"></div>
      <div class="acabamento-opcoes">
        <h3>Tipos de Acabamento</h3>
        <label><input type="radio" name="acabamento-3em1" value="padrao"> Padr√£o</label>
        <label><input type="radio" name="acabamento-3em1" value="revestimento"> Revestimento</label>
        <label><input type="radio" name="acabamento-3em1" value="semcor"> Sem cor</label>
        <label><input type="checkbox" id="lousa-3em1"> Lousa</label>
        <!-- Bloco de cores padr√£o -->
        <div id="cores-padrao-3em1" style="display:none;"><h4>Cores Padr√£o</h4>
            <label><input type="radio" name="cor-padrao-3em1" value="preto"> Preto</label>
            <label><input type="radio" name="cor-padrao-3em1" value="branco"> Branco</label>
            <label><input type="radio" name="cor-padrao-3em1" value="amarelo"> Amarelo</label>
            <label><input type="radio" name="cor-padrao-3em1" value="azul"> Azul</label>
            <label><input type="radio" name="cor-padrao-3em1" value="verde"> Verde</label>
            <label><input type="radio" name="cor-padrao-3em1" value="vermelho"> Vermelho</label>
        </div>
        <!-- Bloco de cores revestimento -->
        <div id="cores-revestimento-3em1" style="display:none;"><h4>Cores Revestimento</h4>
            <label><input type="radio" name="cor-revest-3em1" value="azul"> Azul</label>
            <label><input type="radio" name="cor-revest-3em1" value="amarelo"> Amarelo</label>
            <label><input type="radio" name="cor-revest-3em1" value="preto"> Preto</label>
            <label><input type="radio" name="cor-revest-3em1" value="branco"> Branco</label>
            <label><input type="radio" name="cor-revest-3em1" value="rosa"> Rosa</label>
            <label><input type="radio" name="cor-revest-3em1" value="vermelho"> Vermelho</label>
        </div>
      </div>
    </div>
<!-- Carrossel de fotos -->
<div class="carrossel">
  <h3>Outras fotos</h3>
  <div class="carrossel-imagens" id="carrossel-3em1">
    <!-- As imagens ser√£o inseridas via JS -->
  </div>
</div>
    <div class="botoes-torre">
      <button class="btn-saiba-mais">Saiba Mais</button>
      <button class="btn-comprar">Comprar</button>
    </div>
  </section>

  <!-- TORRE FIXA -->
  <section id="torre-fixa" class="torre-bloco" hidden>
    <h2 class="titulo-produto">Torre Fixa</h2>
    <div class="torre-container">
      <div class="foto-produto"><img src="images/torre_padrao_fixa.jpg" alt="Foto da Torre Fixa"></div>
      <div class="acabamento-opcoes">
        <h3>Tipos de Acabamento</h3>
        <label><input type="radio" name="acabamento-fixa" value="padrao"> Padr√£o</label>
        <label><input type="radio" name="acabamento-fixa" value="revestimento"> Revestimento</label>
        <label><input type="radio" name="acabamento-fixa" value="semcor"> Sem cor</label>
        <label><input type="checkbox" id="lousa-fixa"> Lousa</label>
        <div id="cores-padrao-fixa" style="display:none;"><h4>Cores Padr√£o</h4>
            <label><input type="radio" name="cor-padrao-fixa" value="preto"> Preto</label>
        <label><input type="radio" name="cor-padrao-fixa" value="branco"> Branco</label>
        <label><input type="radio" name="cor-padrao-fixa" value="amarelo"> Amarelo</label>
        <label><input type="radio" name="cor-padrao-fixa" value="azul"> Azul</label>
        <label><input type="radio" name="cor-padrao-fixa" value="rosa"> Rosa</label>
        <label><input type="radio" name="cor-padrao-fixa" value="verde"> Verde</label>
        <label><input type="radio" name="cor-padrao-fixa" value="vermelho"> Vermelho</label>
    </div>
        <div id="cores-revestimento-fixa" style="display:none;"><h4>Cores Revestimento</h4>
            <label><input type="radio" name="cor-revest-fixa" value="amarelo"> Amarelo</label>
            <label><input type="radio" name="cor-revest-fixa" value="azul"> Azul</label>
            <label><input type="radio" name="cor-revest-fixa" value="preto"> Preto</label>
            <label><input type="radio" name="cor-revest-fixa" value="branco"> Branco</label>
            <label><input type="radio" name="cor-revest-fixa" value="rosa"> Rosa</label>
            <label><input type="radio" name="cor-revest-fixa" value="vermelho"> Vermelho</label>
        </div>
      </div>
    </div>
    <div class="carrossel"><h3>Outras fotos</h3><div class="carrossel-imagens">
      <img src="images/torre_fixa01.jpg"><img src="images/torre_fixa02.jpg"><img src="images/torre_fixa03.jpg">
    </div></div>
    <div class="botoes-torre">
      <button class="btn-saiba-mais">Saiba Mais</button>
      <button class="btn-comprar">Comprar</button>
    </div>
  </section>

  <!-- MODAL -->
  <div id="modal-saiba-mais" hidden>
    <div class="modal-backdrop" data-close-modal></div>
    <div class="modal-dialog">
      <header><h3 id="modal-titulo">Informa√ß√µes t√©cnicas</h3><button class="btn-close" data-close-modal>&times;</button></header>
      <div class="modal-content" id="modal-conteudo"></div>
    </div>
  </div>

  <!-- RODAP√â -->
  <footer id="rodape">
    <div class="links-rodape">
      <a href="torre_de_aprendizagem.html">Produtos</a>
      <a href="pau_dalho.html">Sobre</a>
      <a href="contato.html">Contato</a>
    </div>
    <p class="frase-rodape">Feito com madeira, amor e imagina√ß√£o</p>
    <p class="copyright">¬© Pau D'Alho - Ideias Criativas</p>
  </footer>

  <!-- SCRIPTS -->
  <script>
/* ========= Utilit√°rio seguro: esconder/mostrar ========= */
function hide(el){ if(!el) return; el.hidden = true; el.style.display = 'none'; }
function show(el){ if(!el) return; el.hidden = false; el.style.removeProperty('display'); }

/* ========= Menu ========= */
function toggleMenu(){
  const menu=document.getElementById("menu-dropdown");
  menu.style.display = menu.style.display==="block" ? "none" : "block";
}

/* ========= Abrir blocos (3em1 / fixa / curiosidade) ========= */
function mostrar(tipo){
  const b3  = document.getElementById("torre-3em1");
  const bf  = document.getElementById("torre-fixa");
  const bc  = document.getElementById("curiosidade");
  const modal = document.getElementById("modal-saiba-mais");

  // fecha modal se estiver aberto
  if (modal) modal.hidden = true;

  // esconde tudo
  hide(b3); hide(bf);
  if (bc) { bc.style.display="none"; }

  let alvo = null;
  if (tipo === '3em1'){ show(b3); alvo = b3; }
  else if (tipo === 'fixa'){ show(bf); alvo = bf; }
  else if (tipo === 'curiosidade'){ if (bc){ bc.style.display="block"; alvo = bc; } }

  if (alvo && window.innerWidth > 768){
    setTimeout(()=>alvo.scrollIntoView({ behavior:'smooth', block:'start'}), 200);
  }

  // se abriu a 3em1 e ainda n√£o tem carrossel, inicializa agora
  if (tipo==='3em1'){
    const carr = b3?.querySelector('.carrossel-imagens');
    if (carr && carr.children.length === 0) {
      initCarrosselFromPrincipal("torre-3em1");
    }
  }
}

/* ========= Mostra/esconde grupos de cores conforme acabamento ========= */
function setupAcabamento(blocoId, cp, cr){
  const radios = document.querySelectorAll(`#${blocoId} input[name^="acabamento"]`);
  const coresPadrao = document.getElementById(cp);
  const coresRevest = document.getElementById(cr);
  radios.forEach(r=>{
    r.addEventListener('change',()=>{
      if(r.value==='padrao'){ show(coresPadrao); hide(coresRevest); }
      else if(r.value==='revestimento'){ hide(coresPadrao); show(coresRevest); }
      else { hide(coresPadrao); hide(coresRevest); }
    });
  });
}

/* ========= Normaliza√ß√£o de cor (palavra -> abrevia√ß√£o) ========= */
const COR_MAP = {
  am:"am", amarelo:"am",
  az:"az", azul:"az",
  br:"br", branco:"br",
  pt:"pt", preto:"pt",
  ros:"ros", rosa:"ros",
  vm:"vm", vermelho:"vm",
  vd:"vd", verde:"vd" // use "vd" s√≥ se tiver arquivos com esse sufixo
};
function normalizaCor(v){
  if(!v) return null;
  v = String(v).toLowerCase();
  return COR_MAP[v] || null;
}

/* ========= Monta caminhos das imagens da 3em1 =========
   Agora: 1 principal + 6 do carrossel (_mesa, _n01, _n02, _n03, _mural, _n04)
*/
function montarImagens3em1(acabamento, corRaw, lousa){
  let prefixo = "3em1_";
  const cor = normalizaCor(corRaw);

  if(acabamento === "semcor"){
    prefixo += lousa ? "LSC" : "SC";
  } else if(acabamento === "padrao"){
    if(!cor) return null;
    prefixo += (lousa ? "LAP" : "AP") + cor;
  } else if(acabamento === "revestimento"){
    if(!cor) return null;
    prefixo += (lousa ? "LR" : "R") + cor;
  } else {
    return null;
  }

  const base = `images/torre/${prefixo}`;
  return {
    principal: `${base}_cad.webp`,
    carrossel: [
      `${base}_cad.webp`,   // ‚Üê agora o usu√°rio consegue voltar √† ‚Äúcadeira‚Äù
      `${base}_mesa.webp`,
      `${base}_n01.webp`,
      `${base}_n02.webp`,
      `${base}_n03.webp`,
      `${base}_mural.webp`,
      `${base}_n04.webp`
    ],
    basePrefix: prefixo
  };
}


/* ========= (Opcional) v√≠deos por varia√ß√£o ========= */
const VIDEO_BY_PREFIX = {
  // "3em1_Ram": "videos/3em1_Ram_video.mp4",
  // "3em1_APpt": "videos/3em1_APpt_video.mp4"
};

/* ========= Preenche o carrossel (imagem ou v√≠deo) ========= */
function popularCarrossel(container, mainContainer, mediaList){
  container.innerHTML = "";

  // qual m√≠dia est√° em destaque agora?
  const currentSrc =
    mainContainer.querySelector('img')?.src ||
    mainContainer.querySelector('video')?.src || "";

  mediaList.forEach(item=>{
    const isObj = typeof item === 'object' && item !== null;
    const type  = isObj ? item.type : 'image';
    const src   = isObj ? item.src  : item;
    const thumb = isObj ? item.thumb: null;

    const thumbEl = document.createElement(type === 'video' ? 'div' : 'img');
    thumbEl.className = 'thumb';
    thumbEl.style.width='100px';
    thumbEl.style.height='100px';
    thumbEl.style.borderRadius='8px';
    thumbEl.style.cursor='pointer';
    thumbEl.style.objectFit='cover';
    thumbEl.style.overflow='hidden';

    if(type === 'image'){
      thumbEl.src = src;
      thumbEl.alt = "Foto Torre";
      // se a thumb n√£o existir, some silenciosamente
      thumbEl.onerror = () => thumbEl.remove();
      // marca como ativa se corresponde √† principal atual
      if (currentSrc && currentSrc.endsWith(src)) thumbEl.classList.add('ativo');
    } else {
      // ‚Äúminiatura‚Äù de v√≠deo (imagem com √≠cone de play)
      const t = document.createElement('img');
      t.src = thumb || 'images/play_placeholder.webp';
      t.alt = "V√≠deo";
      t.style.position = 'relative';
      thumbEl.appendChild(t);

      const play = document.createElement('span');
      play.textContent = '‚ñ∂';
      play.style.position='absolute';
      play.style.inset='0';
      play.style.display='grid';
      play.style.placeItems='center';
      play.style.fontSize='24px';
      play.style.color='#fff';
      play.style.textShadow='0 2px 6px rgba(0,0,0,.6)';
      thumbEl.style.position='relative';
      thumbEl.appendChild(play);
    }

    // Clique: troca a m√≠dia principal e atualiza ‚Äúativo‚Äù
    thumbEl.addEventListener('click', ()=>{
      mainContainer.innerHTML = '';
      container.querySelectorAll('.thumb').forEach(el=>el.classList.remove('ativo'));

      if(type === 'image'){
        const img = document.createElement('img');
        img.src = src; img.alt = 'Foto principal';
        img.style.width='100%'; img.style.maxWidth='400px';
        img.style.borderRadius='10px'; img.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';
        mainContainer.appendChild(img);
      } else {
        const video = document.createElement('video');
        video.src = src; video.controls = true; video.playsInline = true;
        video.style.width='100%'; video.style.maxWidth='400px';
        video.style.borderRadius='10px'; video.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';
        mainContainer.appendChild(video);
        video.play().catch(()=>{});
      }

      thumbEl.classList.add('ativo');
    });

    container.appendChild(thumbEl);
  });
}


/* ========= Carrossel inicial com base na imagem principal ========= */
function initCarrosselFromPrincipal(blocoId){
  const bloco = document.getElementById(blocoId);
  if(!bloco) return;

  const mainWrap   = bloco.querySelector('.foto-produto');
  const mainImg    = mainWrap?.querySelector('img');
  const container  = bloco.querySelector('.carrossel-imagens');
  if(!mainImg || !container) return;

  // pega ‚Äú3em1_*‚Äù do nome do arquivo atual
  const m = (mainImg.src || '').match(/(?:^|\/)(3em1_[A-Za-z]+)_/);
  if(!m) return;

  const basePrefix = m[1]; // ex.: 3em1_Ram, 3em1_APam, 3em1_LRros...
  const base = `images/torre/${basePrefix}`;

  const media = [
    `${base}_cad.webp`,
    `${base}_mesa.webp`,
    `${base}_n01.webp`,
    `${base}_n02.webp`,
    `${base}_n03.webp`,
    `${base}_mural.webp`,
    `${base}_n04.webp`
  ];

  // (opcional) v√≠deo por varia√ß√£o
  const videoSrc = VIDEO_BY_PREFIX?.[basePrefix];
  if(videoSrc){
    media.unshift({ type:'video', src: videoSrc, thumb: `images/torre/${basePrefix}_video_thumb.webp` });
  }

  popularCarrossel(container, mainWrap, media);
}


/* ========= Troca imagens (principal + carrossel) conforme sele√ß√£o ========= */
function setupTrocaImagens3em1(){
  const bloco = document.getElementById("torre-3em1");
  if(!bloco) return;

  const mainWrap   = bloco.querySelector('.foto-produto');
  const carrossel  = bloco.querySelector('.carrossel-imagens');

  function setPrincipal(src){
    mainWrap.innerHTML = '';
    const img = document.createElement('img');
    img.src = src; img.alt = 'Foto principal';
    img.style.width='100%'; img.style.maxWidth='400px';
    img.style.borderRadius='10px'; img.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';
    mainWrap.appendChild(img);
  }

  function atualizar(){
    const acabamento = bloco.querySelector('input[name="acabamento-3em1"]:checked')?.value;
    const lousa = bloco.querySelector('#lousa-3em1')?.checked;
    const corPadrao = bloco.querySelector('input[name="cor-padrao-3em1"]:checked')?.value;
    const corRevest = bloco.querySelector('input[name="cor-revest-3em1"]:checked')?.value;

    const cor = (acabamento === "padrao") ? corPadrao :
                (acabamento === "revestimento") ? corRevest : null;

    const dados = montarImagens3em1(acabamento, cor, lousa);
    if(!dados) return;

    setPrincipal(dados.principal);

    const media = [...dados.carrossel];
    const videoSrc = VIDEO_BY_PREFIX[dados.basePrefix];
    if(videoSrc){
      media.unshift({ type:'video', src: videoSrc, thumb: `images/torre/${dados.basePrefix}_video_thumb.webp` });
    }
    popularCarrossel(carrossel, mainWrap, media);
  }

  bloco.addEventListener("change", atualizar);
}

/* ========= Hotspots robustos (sem depender de onclick inline) ========= */
function setupHotspots(){
  document.addEventListener('click', (ev)=>{
    const alvo = ev.target.closest('#hotspot-3em1, #hotspot-fixa, #hotspot-capivara');
    if(!alvo) return;
    ev.preventDefault();
    if (alvo.id === 'hotspot-3em1') mostrar('3em1');
    else if (alvo.id === 'hotspot-fixa') mostrar('fixa');
    else if (alvo.id === 'hotspot-capivara') mostrar('curiosidade');
  }, true);
}

/* ========= Modal ‚ÄúSaiba Mais‚Äù ========= */
(function(){
  const modal=document.getElementById('modal-saiba-mais');
  const titulo=document.getElementById('modal-titulo');
  const conteudo=document.getElementById('modal-conteudo');
  document.addEventListener('click',e=>{
    const btn=e.target.closest('.btn-saiba-mais'); if(!btn) return;
    const bloco=btn.closest('.torre-bloco'); const nome=bloco.querySelector('h2').innerText;
    titulo.innerText=`Informa√ß√µes t√©cnicas ‚Äî ${nome}`;
    conteudo.innerHTML=`<p>${nome} √© produzida em compensado multilaminado, com foco em seguran√ßa e durabilidade.</p>
      <ul><li>Dimens√µes: definir</li><li>Materiais: definir</li><li>Capacidade: definir</li></ul>`;
    modal.hidden=false;
  });
  modal.addEventListener('click',e=>{
    if(e.target.matches('[data-close-modal], .modal-backdrop')) modal.hidden=true;
  });
})();

/* ========= WhatsApp ========= */
const WHATSAPP_PHONE="5511934045680";
function montarMensagem(blocoId,nome){
  const bloco=document.getElementById(blocoId);
  const acabamento=bloco.querySelector('input[name^="acabamento"]:checked')?.value||"";
  const lousa=bloco.querySelector('input[type="checkbox"]')?.checked;
  return `Ol√°! Quero fazer um pedido üëã
Produto: ${nome}
Acabamento: ${acabamento}
Lousa: ${lousa?"Sim":"N√£o"}
P√°gina: ${location.href}`;
}
document.addEventListener('click',e=>{
  const btn=e.target.closest('.btn-comprar'); if(!btn) return;
  const bloco=btn.closest('.torre-bloco'); const id=bloco.id; const nome=bloco.querySelector('h2').innerText;
  const msg=montarMensagem(id,nome);
  window.open(`https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(msg)}`,'_blank');
});

/* ========= BOOT: garante ordem de execu√ß√£o ========= */
document.addEventListener('DOMContentLoaded', () => {
  // hotspots sem depender de onclick inline
  setupHotspots();

  // grupos de cores
  setupAcabamento("torre-3em1","cores-padrao-3em1","cores-revestimento-3em1");
  setupAcabamento("torre-fixa","cores-padrao-fixa","cores-revestimento-fixa");

  // comportamento da 3em1
  setupTrocaImagens3em1();

  // carrossel inicial da 3em1, baseado na imagem existente no HTML
  initCarrosselFromPrincipal("torre-3em1");
});
</script>

</body>
</html>
